# ๐ Hackathon Infrastructure

ะะฝััะฐััััะบัััะฐ ะดะปั ัะฐะบะฐัะพะฝะฐ: VPS + Docker + CI/CD.

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะะพัััะฟ ะบ ัะตัะฒะตัั (SSH)](#-ะดะพัััะฟ-ะบ-ัะตัะฒะตัั-ssh)
2. [VPN (WireGuard)](#-vpn-wireguard)
3. [ะะพัััะฟ ะบ ัะตัะฒะธัะฐะผ](#-ะดะพัััะฟ-ะบ-ัะตัะฒะธัะฐะผ)
4. [ะะฐะฑะพัะฐ ั Git](#-ัะฐะฑะพัะฐ-ั-git)
5. [ะัะฐะฒะธะปะฐ ัะฐะฑะพัั ะฒ ะบะพะผะฐะฝะดะต](#-ะฟัะฐะฒะธะปะฐ-ัะฐะฑะพัั-ะฒ-ะบะพะผะฐะฝะดะต-ะฒะฐะถะฝะพ)
6. [ะะฐะบ ัะฐะฑะพัะฐะตั ะดะตะฟะปะพะน](#-ะบะฐะบ-ัะฐะฑะพัะฐะตั-ะดะตะฟะปะพะน)
7. [ะขัะฐะฑะปัััะธะฝะณ](#-ััะฐะฑะปัััะธะฝะณ)

---

## ๐ ะะพัััะฟ ะบ ัะตัะฒะตัั (SSH)

### ะจะฐะณ 1: ะกะณะตะฝะตัะธััะน SSH-ะบะปัั (ะพะดะธะฝ ัะฐะท)

**Linux/macOS:**
```bash
ssh-keygen -t ed25519
```

**Windows (PowerShell):**
```powershell
ssh-keygen -t ed25519
```

ะะฐะถะธะผะฐะน **Enter** ััะธ ัะฐะทะฐ:
```
Enter file in which to save the key: [Enter]
Enter passphrase (empty for no passphrase): [Enter]
Enter same passphrase again: [Enter]
```

**ะะดะต ะฝะฐะนัะธ ะบะปัั:**

| OS | ะััั ะบ ะฟัะฑะปะธัะฝะพะผั ะบะปััั |
|----|------------------------|
| Linux/macOS | `~/.ssh/id_ed25519.pub` |
| Windows | `C:\Users\ะะะจ_ะะะะะ\.ssh\id_ed25519.pub` |

### ะจะฐะณ 2: ะัะฟัะฐะฒั ะบะปัั @Kernyx

ะัะบัะพะน ัะฐะนะป `id_ed25519.pub` ะฒ ัะตะบััะพะฒะพะผ ัะตะดะฐะบัะพัะต, ัะบะพะฟะธััะน ะะกะ ัะพะดะตัะถะธะผะพะต (ะพะดะฝะฐ ะดะปะธะฝะฝะฐั ัััะพะบะฐ) ะธ ะพัะฟัะฐะฒั @Kernyx ะฒ ะปะธัะฝัะต ัะพะพะฑัะตะฝะธั.

### ะจะฐะณ 3: ะะพะดะบะปััะธัั ะบ ัะตัะฒะตัั

**Linux/macOS:**
```bash
ssh hackathon@46.17.46.192
```

**Windows (PowerShell):**
```powershell
ssh hackathon@46.17.46.192
```

> ๐ก **ะะปััะตัะฝะฐัะธะฒะฐ ะดะปั Windows:** [MobaXterm](https://mobaxterm.mobatek.net/) ะธะปะธ [Termius](https://termius.com/)

---

## ๐ VPN (WireGuard)

### ะจะฐะณ 1: ะฃััะฐะฝะพะฒะธ WireGuard

๐ ะกะบะฐัะฐะน ั ะพัะธัะธะฐะปัะฝะพะณะพ ัะฐะนัะฐ: https://www.wireguard.com/install/

### ะจะฐะณ 2: ะะพะปััะธ ะบะพะฝัะธะณ ะพั @Kernyx

ะะพัะปะต ัััะฐะฝะพะฒะบะธ:
1. ะัะบัะพะน WireGuard
2. ะะฐะถะผะธ **ยซImport tunnel(s) from fileยป** (ะธะปะธ ยซะะผะฟะพัั ััะฝะฝะตะปั ะธะท ัะฐะนะปะฐยป)
3. ะัะฑะตัะธ ัะฐะนะป ะบะพะฝัะธะณะฐ, ะบะพัะพััะน ะฟัะธัะปะฐะป @Kernyx
4. ะะฐะถะผะธ **ยซActivateยป** (ะธะปะธ ยซะะพะดะบะปััะธััยป)

### ะจะฐะณ 3: ะัะพะฒะตัั ะฟะพะดะบะปััะตะฝะธะต

**Linux/macOS:**
```bash
ping 10.66.66.1
```

**Windows:**
```powershell
ping 10.66.66.1
```

ะัะปะธ ะฒะธะดะธัั ะพัะฒะตัั โ ะฒัั ัะฐะฑะพัะฐะตั!

---

## ๐พ ะะพัััะฟ ะบ ัะตัะฒะธัะฐะผ (ัะพะปัะบะพ ัะตัะตะท VPN!)

| ะกะตัะฒะธั | ะะดัะตั | ะะพัั | ะะพะณะธะฝ | ะะฐัะพะปั |
|--------|-------|------|-------|--------|
| **PostgreSQL** | `10.66.66.1` | `5432` | `hackathon` | 123 |
| **pgAdmin** | http://10.66.66.1:5050 | `5050` | `admin@besthackaton.duckdns.org` | 123 |
| **RabbitMQ UI** | http://10.66.66.1:15672 | `15672` | `hackathon` | 123 |

### ะะพะดะบะปััะตะฝะธะต ะบ ะะ ะธะท ัะตัะผะธะฝะฐะปะฐ

**Linux/macOS:**
```bash
psql -h 10.66.66.1 -U hackathon -d hackathon_db
# ะะฐัะพะปั: 123
```

**Windows (PowerShell):**
```powershell
# ะัะปะธ ัััะฐะฝะพะฒะปะตะฝ psql:
psql -h 10.66.66.1 -U hackathon -d hackathon_db
# ะะฐัะพะปั: 123
```

### ะะพะดะบะปััะตะฝะธะต ัะตัะตะท pgAdmin (ะฒะตะฑ-ะธะฝัะตััะตะนั)

1. ะัะบัะพะน ะฒ ะฑัะฐัะทะตัะต: http://10.66.66.1:5050
2. ะะฐััะตั-ะฟะฐัะพะปั: `123`
3. ะะฐะถะผะธ **ยซRegisterยป** โ **ยซServerยป**
4. ะะฐ ะฒะบะปะฐะดะบะต **General** ะฒะฒะตะดะธ ะปัะฑะพะต ะธะผั (ะฝะฐะฟัะธะผะตั, "Hackathon DB")
5. ะะฐ ะฒะบะปะฐะดะบะต **Connection**:
   - **Host**: `hackathon-db` (ะธะปะธ `10.66.66.1`)
   - **Port**: `5432`
   - **Maintenance database**: `hackathon_db`
   - **Username**: `hackathon`
   - **Password**: `123`

---

## ๐ป ะะฐะฑะพัะฐ ั Git

### ะจะฐะณ 1: ะะฐัััะพะน Git (ะพะดะธะฝ ัะฐะท ะฝะฐ ััััะพะนััะฒะต)

**Linux/macOS/Windows:**
```bash
git config --global user.name "ะะฐัะต ะะผั"
git config --global user.email "ะฒะฐั@email.com"
```

### ะจะฐะณ 2: ะะพะฑะฐะฒั SSH-ะบะปัั ะฒ GitHub

1. ะกะบะพะฟะธััะน ะฟัะฑะปะธัะฝัะน ะบะปัั:
   ```bash
   cat ~/.ssh/id_ed25519.pub
   ```
   (Windows: `type C:\Users\ะะะจ_ะะะะะ\.ssh\id_ed25519.pub`)

2. ะะฐะนะดะธ ะฒ [GitHub โ Settings โ SSH and GPG keys](https://github.com/settings/keys)
3. ะะฐะถะผะธ **ยซNew SSH keyยป**
4. ะััะฐะฒั ะบะปัั โ ัะพััะฐะฝะธ

### ะจะฐะณ 3: ะะปะพะฝะธััะน ัะตะฟะพะทะธัะพัะธะน

**ะะกะ (Linux/macOS/Windows):**
```bash
# ะะตัะตะนะดะธ ะฒ ะฟะฐะฟะบั, ะณะดะต ัะพัะตัั ััะฐะฝะธัั ะฟัะพะตะบั
cd Documents  # ะธะปะธ ะบัะดะฐ ัะดะพะฑะฝะพ

git clone git@github.com:Kernyx/Hackathon.git
cd Hackathon
```

### ะจะฐะณ 4: ะกะพะทะดะฐะน ัะฒะพั ะฒะตัะบั

```bash
git checkout -b ะฝะฐะทะฒะฐะฝะธะต-ะะะจะะ-ะฒะตัะบะธ
```

ะัะธะผะตัั ะฝะฐะทะฒะฐะฝะธะน:
- `feature/java-auth`
- `fix/frontend-button`
- `ml-model-update`

### ะจะฐะณ 5: ะะฐะฑะพัะฐะน ั ะบะพะดะพะผ

| ะะพะผะฐะฝะดะฐ | ะงัะพ ะดะตะปะฐะตั |
|---------|-----------|
| `git status` | ะะพะบะฐะทะฐัั ะธะทะผะตะฝัะฝะฝัะต ัะฐะนะปั ะธ ัะตะบัััั ะฒะตัะบั |
| `git add .` | ะะพะฑะฐะฒะธัั ะะกะ ะธะทะผะตะฝะตะฝะธั ะฒ ะบะพะผะผะธั |
| `git add ะธะผั_ัะฐะนะปะฐ` | ะะพะฑะฐะฒะธัั ัะพะปัะบะพ ัะบะฐะทะฐะฝะฝัะน ัะฐะนะป |
| `git commit -m "ะพะฟะธัะฐะฝะธะต"` | ะกะพะทะดะฐัั ะบะพะผะผะธั ั ะพะฟะธัะฐะฝะธะตะผ |
| `git push origin ะธะผั-ะฒะตัะบะธ` | ะัะฟัะฐะฒะธัั ะธะทะผะตะฝะตะฝะธั ะฒ GitHub |

---

## โ๏ธ ะัะฐะฒะธะปะฐ ัะฐะฑะพัั ะฒ ะบะพะผะฐะฝะดะต (ะะะะะ!)

### 1. ะะ ะฟััััะต ะฒ `main` ะฝะฐะฟััะผัั!

```bash
# โ ะะะะฌะะฏ ะดะตะปะฐัั ััะพ:
git push origin main

# โ ะะะะะะขะ ัะฐะบ:
git checkout -b feature/ะฝะฐะทะฒะฐะฝะธะต-ัะธัะธ    # ะกะพะทะดะฐะปะธ ะฒะตัะบั
# ... ะฟะธัะตัะต ะบะพะด ...
git add .
git commit -m "ะะพะฑะฐะฒะธะป ะฐะฒัะพัะธะทะฐัะธั"
git push origin feature/ะฝะฐะทะฒะฐะฝะธะต-ัะธัะธ    # ะััะธัะต ะฒะตัะบั
# @Kernyx ะทะฐะผะตัะถะธั ะฒ main ะธ ะทะฐะฟัััะธััั ะดะตะฟะปะพะน
```

### 2. ะะตัะตะด ะฝะฐัะฐะปะพะผ ัะฐะฑะพัั โ ะฒัะตะณะดะฐ ะพะฑะฝะพะฒะปัะนัะตัั!

```bash
git checkout main
git pull origin main
git checkout -b feature/ะผะพั-ะฝะพะฒะฐั-ัะธัะฐ
```

> ๐ก **ะะพัะตะผั ััะพ ะฒะฐะถะฝะพ:** ะัะปะธ ะฝะต ะพะฑะฝะพะฒะธัััั, ะฒั ะผะพะถะตัะต ะฟะตัะตะทะฐะฟะธัะฐัั ััะถะธะต ะธะทะผะตะฝะตะฝะธั!

### 3. ะะพะฝััะฝัะต ะบะพะผะผะธัั

```bash
# โ ะะปะพัะพ:
git commit -m "fix"
git commit -m "asd"

# โ ะฅะพัะพัะพ:
git commit -m "Add JWT authentication to Java backend"
git commit -m "Fix button styling on mobile devices"
git commit -m "Update ML model to v2"
```

### 4. ะัะปะธ ะบะพะฝัะปะธะบั ะฟัะธ `git pull`

```bash
# ะะฒัะพะผะฐัะธัะตัะบะพะต ัะพััะฐะฝะตะฝะธะต ะธะทะผะตะฝะตะฝะธะน ะธ rebase
git config --global pull.rebase true
git config --global rebase.autoStash true

# ะขะตะฟะตัั ะฟัะธ pull:
git pull origin main
# ะัะปะธ ะบะพะฝัะปะธะบั โ ะพัะบัะพะตััั ัะตะดะฐะบัะพั, ะธัะฟัะฐะฒััะต, ัะพััะฐะฝะธัะต
git add .
git rebase --continue
```

---

## ๐ ะะฐะบ ัะฐะฑะพัะฐะตั ะดะตะฟะปะพะน

```
ะะฐัะธ ะดะตะนััะฒะธั:                         ะงัะพ ะฟัะพะธััะพะดะธั:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
1. ะกะพะทะดะฐััะต ะฒะตัะบั ะพั main              โ
2. ะะธัะตัะต ะบะพะด ะฒ ัะฒะพะตะน ะฒะตัะบะต            โ
3. ะะพะผะผะธัะธัะต ะธ ะฟััะธัะต ะฒะตัะบั            โ
4. ะะพะฒะพัะธัะต @Kernyx "ะณะพัะพะฒะพ"           โ
5. @Kernyx ะผะตัะถะธั ะฒ main        โ      ๐ git pull origin main
                                       ๐ฆ docker compose down
                                       ๐ฆ docker compose up -d --build
                                       โ ะะตะฟะปะพะน ะทะฐะฒะตัััะฝ!
```

**ะัะพะฒะตัะธัั ััะฐััั ะดะตะฟะปะพั:** https://github.com/Kernyx/Hackathon/actions

---

## ๐๏ธ ะขัะฐะฑะปัััะธะฝะณ

### ะะต ัะฐะฑะพัะฐะตั VPN

```bash
# ะะตัะตะฟะพะดะบะปััะธัั
sudo wg-quick down wg0 && sudo wg-quick up wg0    # Linux/macOS

# Windows: ะัะบะปััะธัั โ ะะพะดะบะปััะธัั ะฒ ะฟัะธะปะพะถะตะฝะธะธ WireGuard
```

### ะะต ะฟะพะดะบะปััะฐะตััั ะบ ะะ

```bash
# 1. ะัะพะฒะตัั VPN
ping 10.66.66.1

# 2. ะัะพะฒะตัั ะฟะพัั
pg_isready -h 10.66.66.1 -p 5432 -U hackathon
```

### ะะตะฟะปะพะน ะฝะต ััะฐะฑะพัะฐะป

```bash
# ะะฐ ัะตัะฒะตัะต (ะฟะพะดะบะปััะธัั ะฟะพ SSH)
tail -f /opt/hackathon/logs/deploy.log

# ะะปะธ ะทะฐะฟัััะธ ะฒัััะฝัั:
cd /opt/hackathon && ./deploy.sh
```

### Git: "Your branch and 'origin/main' have diverged"

```bash
# ะัะพััะพ ัะดะตะปะฐะน:
git pull origin main

# ะัะปะธ ะฝะต ะฟะพะผะพะณะปะพ:
git fetch origin
git reset --hard origin/main    # โ๏ธ ะะพัะตััะตัั ะปะพะบะฐะปัะฝัะต ะธะทะผะตะฝะตะฝะธั!
```
