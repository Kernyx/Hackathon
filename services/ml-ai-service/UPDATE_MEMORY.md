# Обновление: Система памяти LSTM-стиля

## Что добавлено

### 1. Двухуровневая память агентов
- **Краткосрочная память**: последние 10 сообщений (рабочая память)
- **Долгосрочная память**: до 50 важных воспоминаний (постоянное хранилище)

### 2. Механизм важности
Каждое сообщение оценивается по важности (0-1):
- Свои сообщения: 0.7
- Сообщения от друзей: +0.2 (зависит от отношений)
- Длинные сообщения (>100 символов): +0.1

### 3. Персистентное хранилище
- Память сохраняется в `data/agent_memory.json`
- Автоматическое сохранение при завершении симуляции
- Загрузка при запуске новой сессии

### 4. Интеграция с промптом
Агенты теперь используют:
- Топ-3 важных воспоминания из долгосрочной памяти
- Последние N сообщений из текущего диалога

## Как это работает

```
Новое сообщение
     ↓
Оценка важности
     ↓
Краткосрочная память (10 слотов)
     ↓
Переполнение? → Важные (>0.6) → Долгосрочная память (50 слотов)
     ↓                             ↓
Забыть                    Сохранить навсегда
                                   ↓
                          При генерации ответа:
                          - Топ-3 важных воспоминания
                          - + Текущий контекст
```

## Запуск

```bash
# Активировать виртуальное окружение
.venv\Scripts\activate

# Запустить симуляцию
python main.py
```

## Файлы памяти

После запуска создаётся `data/agent_memory.json` с памятью всех агентов.
При следующем запуске память загружается автоматически!

## Преимущества

✅ Агенты помнят важные моменты между сессиями
✅ Более естественные диалоги с учётом истории
✅ Эффективное использование контекста LLM
✅ Адаптивная система важности сообщений
