# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã AI-–∞–≥–µ–Ω—Ç–æ–≤
## –•–∞–∫–∞—Ç–æ–Ω "–ö–ò–ë–ï–† –†–´–í–û–ö"

---

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∏ –ª–æ–≥–∏–∫–∞ –æ–±—â–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π event-driven —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏**, –≥–¥–µ –∞–≥–µ–Ω—Ç—ã –∂–∏–≤—É—Ç –≤ –æ–±—â–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è.

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∞–≥–µ–Ω—Ç–∞ (–∫–∞–∂–¥—ã–π —Ç–∏–∫ —Å–∏–º—É–ª—è—Ü–∏–∏)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    SIMULATION TICK                      ‚îÇ
‚îÇ                     (–±–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤—Ä–µ–º–µ–Ω–∏)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –í–û–°–ü–†–ò–Ø–¢–ò–ï (Perception)                              ‚îÇ
‚îÇ    ‚Ä¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è                     ‚îÇ
‚îÇ    ‚Ä¢ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤              ‚îÇ
‚îÇ    ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø                                 ‚îÇ
‚îÇ    ‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è                ‚îÇ
‚îÇ    ‚Ä¢ –ü–µ—Ä–µ—Å—á—ë—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏              ‚îÇ
‚îÇ    ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –ø–∞–º—è—Ç—å                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ü–ê–ú–Ø–¢–ò (Memory Retrieval)                 ‚îÇ
‚îÇ    ‚Ä¢ –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π           ‚îÇ
‚îÇ    ‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏ —Å–≤–µ–∂–µ—Å—Ç–∏                  ‚îÇ
‚îÇ    ‚Ä¢ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è LLM                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï (LLM Reasoning)                         ‚îÇ
‚îÇ    ‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ LLM                           ‚îÇ
‚îÇ    ‚Ä¢ –ü–æ–ª—É—á–µ–Ω–∏–µ JSON-–ø–ª–∞–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π                      ‚îÇ
‚îÇ    ‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 5. –î–ï–ô–°–¢–í–ò–ï (Action Execution)                          ‚îÇ
‚îÇ    ‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è               ‚îÇ
‚îÇ    ‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤               ‚îÇ
‚îÇ    ‚Ä¢ Broadcast –≤ —Å–∏—Å—Ç–µ–º—É                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ö° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç—å—é –æ–±—â–µ–Ω–∏—è

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–∏–º—É–ª—è—Ü–∏–∏

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –û—Ç–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–∏–º—É–ª—è—Ü–∏–∏.

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫–æ—Ä–æ—Å—Ç–∏
TICK_DURATION = 1.0  # —Å–µ–∫—É–Ω–¥–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ 1 —Ç–∏–∫
TIME_MULTIPLIER = 1.0  # –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–ª–∞–π–¥–µ—Ä–æ–º)

# –ü—Ä–∏–º–µ—Ä—ã:
# TIME_MULTIPLIER = 0.5  ‚Üí –∞–≥–µ–Ω—Ç—ã –æ–±—â–∞—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ (2 —Å–µ–∫ –Ω–∞ —Ç–∏–∫)
# TIME_MULTIPLIER = 2.0  ‚Üí –∞–≥–µ–Ω—Ç—ã –æ–±—â–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ (0.5 —Å–µ–∫ –Ω–∞ —Ç–∏–∫)
# TIME_MULTIPLIER = 5.0  ‚Üí —É—Å–∫–æ—Ä–µ–Ω–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è (0.2 —Å–µ–∫ –Ω–∞ —Ç–∏–∫)
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏

```python
class SimulationController:
    def __init__(self):
        self.time_multiplier = 1.0  # default
        self.current_tick = 0
        self.is_running = False
        
    def set_speed(self, multiplier: float):
        """–ò–∑–º–µ–Ω–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏ (–æ—Ç —Å–ª–∞–π–¥–µ—Ä–∞ —Ñ—Ä–æ–Ω—Ç–∞)"""
        self.time_multiplier = max(0.1, min(10.0, multiplier))
        
    async def run_simulation_loop(self):
        """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏"""
        while self.is_running:
            tick_start = time.time()
            
            # –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω —Ç–∏–∫ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
            await self.process_tick()
            
            # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É —Å —É—á—ë—Ç–æ–º –º–Ω–æ–∂–∏—Ç–µ–ª—è
            base_delay = 1.0  # 1 —Å–µ–∫—É–Ω–¥–∞ –±–∞–∑–æ–≤–∞—è
            adjusted_delay = base_delay / self.time_multiplier
            
            # –£—á–µ—Å—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∏–∫–∞
            elapsed = time.time() - tick_start
            sleep_time = max(0, adjusted_delay - elapsed)
            
            await asyncio.sleep(sleep_time)
            self.current_tick += 1
```

### –ú–µ—Ö–∞–Ω–∏–∑–º throttling –¥–ª—è LLM –∑–∞–ø—Ä–æ—Å–æ–≤

```python
class AgentThrottler:
    """–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É LLM API"""
    
    def __init__(self, max_concurrent=5, cooldown=2.0):
        self.semaphore = asyncio.Semaphore(max_concurrent)
        self.cooldown = cooldown
        self.last_request = {}
        
    async def can_act(self, agent_id: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–µ—Ç –ª–∏ –∞–≥–µ–Ω—Ç —Å–µ–π—á–∞—Å –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å"""
        now = time.time()
        last = self.last_request.get(agent_id, 0)
        
        if now - last < self.cooldown:
            return False
            
        async with self.semaphore:
            self.last_request[agent_id] = now
            return True
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (Frontend ‚Üí ai-agent-service)

```json
{
  "agent_data": {
    "name": "–ê–ª–∏—Å–∞",
    "avatar_url": "https://...",
    "personality_type": "ENFP",
    "age": 25,
    "interests": ["–º—É–∑—ã–∫–∞", "–∏—Å–∫—É—Å—Å—Ç–≤–æ", "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"],
    "additional_traits": "–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞, –ª—é–±–∏—Ç –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º, –Ω–µ–º–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∏–≤–Ω–∞. –ú–µ—á—Ç–∞–µ—Ç —Å—Ç–∞—Ç—å —Ö—É–¥–æ–∂–Ω–∏–∫–æ–º.",
    "initial_mood": {
      "happiness": 0.7,
      "energy": 0.6,
      "sociability": 0.8
    }
  }
}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ ai-agent-service:**
```python
# 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
# 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ PostgreSQL
# 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ ml-service –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

---

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞ (ai-agent-service ‚Üí ml-service)

```json
{
  "command": "initialize_agent",
  "agent_id": "agent_001",
  "data": {
    "name": "–ê–ª–∏—Å–∞",
    "personality": {
      "type": "ENFP",
      "traits": {
        "openness": 0.8,
        "conscientiousness": 0.6,
        "extraversion": 0.9,
        "agreeableness": 0.7,
        "neuroticism": 0.4
      },
      "description": "–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞, –ª—é–±–∏—Ç –ø–æ–º–æ–≥–∞—Ç—å..."
    },
    "age": 25,
    "interests": ["–º—É–∑—ã–∫–∞", "–∏—Å–∫—É—Å—Å—Ç–≤–æ", "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"],
    "initial_mood": {
      "happiness": 0.7,
      "energy": 0.6,
      "sociability": 0.8
    }
  }
}
```

**–î–µ–π—Å—Ç–≤–∏—è ml-service:**
1. –°–æ–∑–¥–∞—Ç—å –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ –∞–≥–µ–Ω—Ç–∞
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Chroma collection)
3. –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—É—é —Å–æ—Ü–∏–∞–ª—å–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É
4. –í–µ—Ä–Ω—É—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

---

### 3. –°–æ–±—ã—Ç–∏–µ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ (ai-agent-service ‚Üí ml-service)

```json
{
  "command": "process_event",
  "simulation_id": "sim_001",
  "tick": 1523,
  "event": {
    "type": "user_message",
    "target_agent_id": "agent_001",
    "content": "–ü—Ä–∏–≤–µ—Ç, –ê–ª–∏—Å–∞! –ö–∞–∫ –¥–µ–ª–∞?",
    "sender": "user",
    "timestamp": 1708095600
  }
}
```

–∏–ª–∏

```json
{
  "command": "process_event",
  "simulation_id": "sim_001",
  "tick": 1524,
  "event": {
    "type": "agent_message",
    "sender_agent_id": "agent_002",
    "target_agent_id": "agent_001",
    "content": "–°–ª—É—à–∞–π, —Ö–æ—á–µ—à—å —Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç –∑–∞–≤—Ç—Ä–∞?",
    "timestamp": 1708095661
  }
}
```

–∏–ª–∏

```json
{
  "command": "process_event",
  "simulation_id": "sim_001",
  "tick": 1525,
  "event": {
    "type": "environment",
    "content": "–ù–∞–π–¥–µ–Ω –∫–ª–∞–¥ —Å –¥—Ä–µ–≤–Ω–∏–º–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏!",
    "affected_agents": ["agent_001", "agent_002", "agent_003"],
    "timestamp": 1708095722
  }
}
```

---

### 4. –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ (ml-service ‚Üí ai-agent-service)

```json
{
  "agent_id": "agent_001",
  "tick": 1523,
  "response": {
    "action": {
      "type": "message",
      "target": "user",
      "content": "–ü—Ä–∏–≤–µ—Ç! –î–µ–ª–∞ –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! –°–µ–≥–æ–¥–Ω—è —Ç–∞–∫–æ–π —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å! ‚òÄÔ∏è",
      "emotion": "joyful"
    },
    "internal_state": {
      "mood": {
        "happiness": 0.75,
        "energy": 0.65,
        "sociability": 0.85
      },
      "thought": "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ! –•–æ—á–µ—Ç—Å—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–∑–∏—Ç–∏–≤–æ–º."
    },
    "memory_saved": {
      "event": "user_message",
      "importance": 0.6,
      "reflection": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—è–≤–∏–ª –∏–Ω—Ç–µ—Ä–µ—Å –∫–æ –º–Ω–µ, —ç—Ç–æ –º–∏–ª–æ"
    }
  }
}
```

---

### 5. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (ai-agent-service ‚Üí Frontend)

```json
{
  "agent_id": "agent_001",
  "name": "–ê–ª–∏—Å–∞",
  "avatar_url": "https://...",
  "current_state": {
    "mood": {
      "happiness": 0.75,
      "energy": 0.65,
      "sociability": 0.85,
      "dominant_emotion": "joyful",
      "emoji": "üòä"
    },
    "status": "active",
    "last_action": "–û—Ç–ø—Ä–∞–≤–∏–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é",
    "last_action_time": 1708095600
  },
  "relationships": [
    {
      "agent_id": "agent_002",
      "agent_name": "–ë–æ–±",
      "relationship_value": 0.6,
      "relationship_type": "friend",
      "last_interaction": "30 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥"
    },
    {
      "agent_id": "agent_003",
      "agent_name": "–ß–∞—Ä–ª–∏",
      "relationship_value": -0.3,
      "relationship_type": "rival",
      "last_interaction": "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥"
    }
  ],
  "recent_memories": [
    {
      "timestamp": 1708095000,
      "event": "–ë–æ–± –ø—Ä–∏–≥–ª–∞—Å–∏–ª –Ω–∞ –∫–æ–Ω—Ü–µ—Ä—Ç",
      "importance": 0.8,
      "emotion": "excited"
    },
    {
      "timestamp": 1708094000,
      "event": "–ü–æ—Å–ø–æ—Ä–∏–ª–∞ —Å –ß–∞—Ä–ª–∏ –æ –º—É–∑—ã–∫–µ",
      "importance": 0.7,
      "emotion": "frustrated"
    }
  ]
}
```

---

### 6. –ì—Ä–∞—Ñ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (ai-agent-service ‚Üí Frontend)

```json
{
  "simulation_id": "sim_001",
  "tick": 1523,
  "graph": {
    "nodes": [
      {
        "id": "agent_001",
        "name": "–ê–ª–∏—Å–∞",
        "avatar_url": "https://...",
        "mood_color": "#FFD700",
        "mood_emoji": "üòä"
      },
      {
        "id": "agent_002",
        "name": "–ë–æ–±",
        "avatar_url": "https://...",
        "mood_color": "#87CEEB",
        "mood_emoji": "üòå"
      }
    ],
    "edges": [
      {
        "from": "agent_001",
        "to": "agent_002",
        "value": 0.6,
        "color": "#4CAF50",
        "label": "–¥—Ä—É–∑—å—è",
        "strength": "medium",
        "interactions_count": 23
      },
      {
        "from": "agent_001",
        "to": "agent_003",
        "value": -0.3,
        "color": "#F44336",
        "label": "—Å–æ–ø–µ—Ä–Ω–∏–∫–∏",
        "strength": "weak",
        "interactions_count": 8
      }
    ]
  }
}
```

---

### 7. –õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π (ai-agent-service ‚Üí Frontend, WebSocket)

```json
{
  "type": "event_stream",
  "events": [
    {
      "tick": 1523,
      "timestamp": 1708095600,
      "event_type": "message",
      "from": "agent_001",
      "from_name": "–ê–ª–∏—Å–∞",
      "to": "user",
      "content": "–ü—Ä–∏–≤–µ—Ç! –î–µ–ª–∞ –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!",
      "emotion": "joyful"
    },
    {
      "tick": 1524,
      "timestamp": 1708095661,
      "event_type": "mood_change",
      "agent_id": "agent_002",
      "agent_name": "–ë–æ–±",
      "old_mood": "neutral",
      "new_mood": "anxious",
      "reason": "–ë–µ—Å–ø–æ–∫–æ–∏—Ç—Å—è –æ –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–º —ç–∫–∑–∞–º–µ–Ω–µ"
    },
    {
      "tick": 1525,
      "timestamp": 1708095722,
      "event_type": "relationship_change",
      "agent1_id": "agent_001",
      "agent1_name": "–ê–ª–∏—Å–∞",
      "agent2_id": "agent_003",
      "agent2_name": "–ß–∞—Ä–ª–∏",
      "old_value": -0.2,
      "new_value": -0.3,
      "reason": "–û—á–µ—Ä–µ–¥–Ω–æ–π —Å–ø–æ—Ä –æ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –≤–∫—É—Å–∞—Ö"
    }
  ]
}
```

---

## üèóÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

### AI-Agent-Service (Backend)

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** FastAPI, PostgreSQL, Redis, WebSocket

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**

#### 1. CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∞–≥–µ–Ω—Ç–∞–º–∏
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
POST /api/agents
{
  "name": "–ê–ª–∏—Å–∞",
  "avatar_url": "...",
  "personality_type": "ENFP",
  ...
}

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
GET /api/agents/{agent_id}

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
PATCH /api/agents/{agent_id}

# –£–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
DELETE /api/agents/{agent_id}

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
GET /api/agents
```

#### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π
```python
# –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
POST /api/simulation/start

# –ü–∞—É–∑–∞
POST /api/simulation/pause

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
POST /api/simulation/speed
{
  "multiplier": 2.0
}

# –°—Ç–∞—Ç—É—Å —Å–∏–º—É–ª—è—Ü–∏–∏
GET /api/simulation/status
```

#### 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É
POST /api/interaction/message
{
  "target_agent_id": "agent_001",
  "content": "–ü—Ä–∏–≤–µ—Ç!"
}

# –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ –º–∏—Ä
POST /api/interaction/event
{
  "type": "environment",
  "content": "–ù–∞–π–¥–µ–Ω –∫–ª–∞–¥!"
}

# –ò–∑–º–µ–Ω–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
POST /api/interaction/environment
{
  "parameter": "weather",
  "value": "rainy"
}
```

#### 4. WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
```python
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ª–µ–Ω—Ç–µ —Å–æ–±—ã—Ç–∏–π
WS /ws/events

# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
WS /ws/agent/{agent_id}

# –ì—Ä–∞—Ñ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
WS /ws/relationships
```

#### 5. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å ML-—Å–µ—Ä–≤–∏—Å–æ–º
```python
class MLServiceClient:
    """–ö–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å ML-—Å–µ—Ä–≤–∏—Å–æ–º"""
    
    async def initialize_agent(self, agent_data):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ –≤ ML"""
        
    async def send_event(self, event):
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É"""
        
    async def get_agent_state(self, agent_id):
        """–ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –∏–∑ ML"""
        
    async def request_memory_summary(self, agent_id):
        """–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–º–ø—Ä–µ—Å—Å–∏—é –ø–∞–º—è—Ç–∏"""
```

---

### ML-Service (Machine Learning)

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** FastAPI, ChromaDB, OpenAI/Gemini/YandexGPT API, sentence-transformers

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**

#### 1. –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ –∞–≥–µ–Ω—Ç–∞
```python
class CognitiveAgent:
    def __init__(self, agent_id, personality, initial_mood):
        self.agent_id = agent_id
        self.personality = personality
        self.mood = initial_mood
        self.memory_engine = MemoryEngine(agent_id)
        self.social_model = SocialModel(agent_id)
        self.llm_client = LLMClient()
        
    async def process_event(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–±—ã—Ç–∏–µ"""
        # 1. –û–±–Ω–æ–≤–∏—Ç—å —ç–º–æ—Ü–∏–∏
        self.update_emotions(event)
        
        # 2. –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è
        self.update_relationships(event)
        
        # 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–∞–º—è—Ç—å
        await self.memory_engine.store(event)
        
        # 4. –ò–∑–≤–ª–µ—á—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è
        memories = await self.memory_engine.retrieve(event)
        
        # 5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ LLM
        action = await self.llm_client.plan_action(
            personality=self.personality,
            mood=self.mood,
            relationships=self.social_model.get_state(),
            memories=memories,
            event=event
        )
        
        return action
```

#### 2. Memory Engine
```python
class MemoryEngine:
    def __init__(self, agent_id):
        self.agent_id = agent_id
        self.chroma_client = ChromaDB()
        self.collection = f"agent_{agent_id}_memories"
        self.embedder = SentenceTransformer('all-MiniLM-L6-v2')
        
    async def store(self, event):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ –ø–∞–º—è—Ç—å"""
        # –°–æ–∑–¥–∞—Ç—å —ç–ø–∏–∑–æ–¥ –ø–∞–º—è—Ç–∏
        memory = {
            "event": event,
            "reflection": await self.generate_reflection(event),
            "emotion": self.current_emotion,
            "social": self.social_snapshot,
            "importance": self.calculate_importance(event),
            "timestamp": time.time()
        }
        
        # –í–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å
        text = self.format_for_embedding(memory)
        embedding = self.embedder.encode(text)
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ ChromaDB
        self.chroma_client.add(
            collection=self.collection,
            embeddings=[embedding],
            metadatas=[memory],
            ids=[f"mem_{uuid.uuid4()}"]
        )
        
    async def retrieve(self, query_context, top_k=5):
        """–ò–∑–≤–ª–µ—á—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è"""
        query_text = self.format_query(query_context)
        query_embedding = self.embedder.encode(query_text)
        
        results = self.chroma_client.query(
            collection=self.collection,
            query_embeddings=[query_embedding],
            n_results=top_k
        )
        
        # –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏
        memories = self.filter_by_importance(results)
        
        return memories
        
    async def compress_old_memories(self):
        """–ö–æ–º–ø—Ä–µ—Å—Å–∏—è —Å—Ç–∞—Ä—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π"""
        old_memories = self.get_old_memories(days=7)
        
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ LLM –¥–ª—è summary
        summary = await self.llm_client.summarize(old_memories)
        
        # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
        self.delete_memories(old_memories)
        
        # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∂–∞—Ç–æ–µ
        await self.store_summary(summary)
```

#### 3. Social Model
```python
class SocialModel:
    def __init__(self, agent_id):
        self.agent_id = agent_id
        self.relationships = {}  # {agent_id: value}
        
    def update_relationship(self, other_agent_id, event):
        """–û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏—è"""
        current = self.relationships.get(other_agent_id, 0.0)
        
        # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
        delta = self.calculate_relationship_change(event)
        
        # –û–±–Ω–æ–≤–∏—Ç—å —Å decay
        new_value = self.apply_decay(current) + delta
        new_value = max(-1.0, min(1.0, new_value))
        
        self.relationships[other_agent_id] = new_value
        
    def calculate_relationship_change(self, event):
        """–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è"""
        if event.type == "compliment":
            return 0.1
        elif event.type == "insult":
            return -0.15
        elif event.type == "help":
            return 0.2
        elif event.type == "conflict":
            return -0.25
        else:
            return 0.0
            
    def get_relationship_type(self, value):
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ—Ç–Ω–æ—à–µ–Ω–∏—è"""
        if value > 0.6:
            return "close_friend"
        elif value > 0.3:
            return "friend"
        elif value > -0.3:
            return "acquaintance"
        elif value > -0.6:
            return "rival"
        else:
            return "enemy"
```

#### 4. LLM Client
```python
class LLMClient:
    def __init__(self):
        self.provider = "openai"  # or "gemini" or "yandex"
        self.model = "gpt-4"
        
    async def plan_action(self, personality, mood, relationships, 
                          memories, event):
        """–ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –æ—Ç LLM"""
        
        system_prompt = self.build_system_prompt(personality)
        user_prompt = self.build_user_prompt(
            mood, relationships, memories, event
        )
        
        response = await self.call_llm(system_prompt, user_prompt)
        
        # –ü–∞—Ä—Å–∏–Ω–≥ JSON
        action = self.parse_response(response)
        
        return action
        
    def build_system_prompt(self, personality):
        """–ü–æ—Å—Ç—Ä–æ–∏—Ç—å system prompt –¥–ª—è –∞–≥–µ–Ω—Ç–∞"""
        return f"""
You are {personality.name}, a {personality.age}-year-old person with the following traits:
- Personality type: {personality.type}
- Interests: {', '.join(personality.interests)}
- Character: {personality.description}

You must respond in character and return your action in JSON format:
{{
    "action": {{
        "type": "message" | "think" | "activity",
        "target": "agent_id or null",
        "content": "your message or thought",
        "emotion": "happy|sad|angry|excited|neutral"
    }},
    "internal_thought": "your reasoning"
}}
"""
        
    def build_user_prompt(self, mood, relationships, memories, event):
        """–ü–æ—Å—Ç—Ä–æ–∏—Ç—å user prompt —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º"""
        return f"""
Current mood:
- Happiness: {mood.happiness}
- Energy: {mood.energy}
- Sociability: {mood.sociability}

Relationships:
{self.format_relationships(relationships)}

Relevant memories:
{self.format_memories(memories)}

Current event:
{self.format_event(event)}

How do you respond?
"""
```

#### 5. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã ML-—Å–µ—Ä–≤–∏—Å–∞
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
POST /ml/agent/initialize
{
  "agent_id": "...",
  "personality": {...},
  "initial_mood": {...}
}

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è
POST /ml/agent/process
{
  "agent_id": "...",
  "event": {...}
}

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
GET /ml/agent/{agent_id}/state

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
GET /ml/agent/{agent_id}/memories?query=...

# –ö–æ–º–ø—Ä–µ—Å—Å–∏—è –ø–∞–º—è—Ç–∏
POST /ml/agent/{agent_id}/compress

# Health check
GET /ml/health
```

---

## üì¶ –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–∞ (–ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞)

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞ (Frontend input)

```json
{
  "name": "–ê–ª–∏—Å–∞",
  "avatar_url": "https://storage.example.com/avatars/alice.png",
  "personality_type": "ENFP",
  "age": 25,
  "interests": [
    "–º—É–∑—ã–∫–∞",
    "–∏—Å–∫—É—Å—Å—Ç–≤–æ", 
    "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è",
    "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"
  ],
  "additional_traits": "–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞, –ª—é–±–∏—Ç –ø–æ–º–æ–≥–∞—Ç—å –ª—é–¥—è–º, –Ω–µ–º–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∏–≤–Ω–∞. –ú–µ—á—Ç–∞–µ—Ç —Å—Ç–∞—Ç—å —Ö—É–¥–æ–∂–Ω–∏–∫–æ–º. –ë–æ–∏—Ç—Å—è –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞. –¶–µ–Ω–∏—Ç —á–µ—Å—Ç–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö."
}
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL (ai-agent-service)

```sql
CREATE TABLE agents (
    agent_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    avatar_url TEXT,
    personality_type VARCHAR(10),
    age INTEGER,
    interests TEXT[],
    additional_traits TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    is_active BOOLEAN DEFAULT TRUE
);

CREATE TABLE agent_states (
    id SERIAL PRIMARY KEY,
    agent_id UUID REFERENCES agents(agent_id),
    tick INTEGER,
    mood_happiness FLOAT,
    mood_energy FLOAT,
    mood_sociability FLOAT,
    dominant_emotion VARCHAR(50),
    last_action TEXT,
    timestamp TIMESTAMP DEFAULT NOW()
);

CREATE TABLE relationships (
    id SERIAL PRIMARY KEY,
    agent1_id UUID REFERENCES agents(agent_id),
    agent2_id UUID REFERENCES agents(agent_id),
    relationship_value FLOAT,
    relationship_type VARCHAR(50),
    interaction_count INTEGER DEFAULT 0,
    last_interaction TIMESTAMP,
    UNIQUE(agent1_id, agent2_id)
);

CREATE TABLE simulation_events (
    id SERIAL PRIMARY KEY,
    simulation_id VARCHAR(100),
    tick INTEGER,
    event_type VARCHAR(50),
    agent_id UUID REFERENCES agents(agent_id),
    event_data JSONB,
    timestamp TIMESTAMP DEFAULT NOW()
);
```

### –í ML-—Å–µ—Ä–≤–∏—Å–µ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)

```python
@dataclass
class AgentPersonality:
    name: str
    type: str  # MBTI
    age: int
    interests: List[str]
    traits: Dict[str, float]  # Big Five
    description: str
    
@dataclass
class AgentMood:
    happiness: float  # -1.0 to 1.0
    energy: float
    sociability: float
    dominant_emotion: str
    
@dataclass
class Memory:
    event: Dict
    reflection: str
    emotion: Dict
    social_context: Dict
    importance: float
    timestamp: float
    
@dataclass
class Relationship:
    agent_id: str
    value: float  # -1.0 to 1.0
    relationship_type: str
    history: List[Dict]
```

---

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–ª–Ω—ã–π flow)

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Frontend ‚îÇ         ‚îÇ ai-agent-service ‚îÇ         ‚îÇ ml-service  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ 1. POST /api/interaction/message                  ‚îÇ
     ‚îÇ {"target": "agent_001", "content": "–ü—Ä–∏–≤–µ—Ç!"}    ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞     ‚îÇ
     ‚îÇ                        ‚îÇ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ 3. POST /ml/agent/process‚îÇ
     ‚îÇ                        ‚îÇ {event: {...}}           ‚îÇ
     ‚îÇ                        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ 4. –û–±—Ä–∞–±–æ—Ç–∫–∞:
     ‚îÇ                        ‚îÇ                          ‚îÇ - Update emotions
     ‚îÇ                        ‚îÇ                          ‚îÇ - Update relationships
     ‚îÇ                        ‚îÇ                          ‚îÇ - Store memory
     ‚îÇ                        ‚îÇ                          ‚îÇ - Retrieve memories
     ‚îÇ                        ‚îÇ                          ‚îÇ - Call LLM
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ 5. Response {action: ...}‚îÇ
     ‚îÇ                        ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ 6. WebSocket broadcast ‚îÇ                          ‚îÇ
     ‚îÇ {event: "new_message"}‚îÇ                          ‚îÇ
     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ 7. GET /api/agent/agent_001/state                 ‚îÇ
     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ                          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
     ‚îÇ 8. Response with full state                       ‚îÇ
     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                          ‚îÇ
     ‚îÇ                        ‚îÇ                          ‚îÇ
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ai-agent-service (.env)

```bash
# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/agents_db
REDIS_URL=redis://localhost:6379

# ML Service
ML_SERVICE_URL=http://localhost:8001

# WebSocket
WS_HEARTBEAT_INTERVAL=30

# Simulation
DEFAULT_TICK_DURATION=1.0
MAX_TIME_MULTIPLIER=10.0
MIN_TIME_MULTIPLIER=0.1
```

### ml-service (.env)

```bash
# LLM Provider
LLM_PROVIDER=openai  # openai | gemini | yandex
OPENAI_API_KEY=sk-...
GEMINI_API_KEY=...
YANDEX_API_KEY=...

# Model
LLM_MODEL=gpt-4
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=500

# Vector DB
CHROMA_PERSIST_DIR=./chroma_db
EMBEDDING_MODEL=all-MiniLM-L6-v2

# Memory
MAX_MEMORIES_PER_AGENT=1000
MEMORY_COMPRESSION_THRESHOLD=800
MEMORY_IMPORTANCE_THRESHOLD=0.3

# Performance
MAX_CONCURRENT_LLM_CALLS=5
LLM_COOLDOWN_SECONDS=2.0
```

---

## üöÄ MVP Checklist –¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞

### –î–µ–Ω—å 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –ü–æ–¥–Ω—è—Ç—å ai-agent-service (FastAPI)
- [ ] –ü–æ–¥–Ω—è—Ç—å ml-service (FastAPI)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ChromaDB
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –∞–≥–µ–Ω—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤–æ–µ –æ–±—â–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –î–µ–Ω—å 2: –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Memory Engine
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LLM (OpenAI/Gemini)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Social Model
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Emotion System
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∏–º—É–ª—è—Ü–∏–∏

### –î–µ–Ω—å 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] WebSocket –¥–ª—è real-time —Å–æ–±—ã—Ç–∏–π
- [ ] API –¥–ª—è –≥—Ä–∞—Ñ–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- [ ] API –¥–ª—è –ª–µ–Ω—Ç—ã —Å–æ–±—ã—Ç–∏–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –ß—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å –∂—é—Ä–∏:

1. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –ù–µ—Å–∫–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç–æ–≤ –æ–±—â–∞—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–Ω—è—é—Ç—Å—è
2. **–ü–∞–º—è—Ç—å:** –ê–≥–µ–Ω—Ç –≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–æ—à–ª—ã–µ —Å–æ–±—ã—Ç–∏—è (–ø–æ–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞)
3. **–≠–º–æ—Ü–∏–∏:** –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–≤–∏–¥–Ω–æ –Ω–∞ –≥—Ä–∞—Ñ–µ)
4. **–°–∫–æ—Ä–æ—Å—Ç—å:** –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–µ—Ä–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∏–º—É–ª—è—Ü–∏–∏
5. **–ì—Ä–∞—Ñ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥—Ä–∞—Ñ —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏

---

## üé® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞—â–∏—Ç—ã (10 –º–∏–Ω—É—Ç):

1. **–ü—Ä–æ–±–ª–µ–º–∞** (1 –º–∏–Ω): –ó–∞—á–µ–º –Ω—É–∂–Ω—ã AI-–∞–≥–µ–Ω—Ç—ã —Å –ø–∞–º—è—Ç—å—é –∏ —ç–º–æ—Ü–∏—è–º–∏?
2. **–†–µ—à–µ–Ω–∏–µ** (2 –º–∏–Ω): –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–∞
3. **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è** (5 –º–∏–Ω): 
   - –°–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞
   - –ü–æ–∫–∞–∑–∞—Ç—å –æ–±—â–µ–Ω–∏–µ
   - –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
   - –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞–º—è—Ç—å
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç—å—é
4. **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏** (1 –º–∏–Ω): –°—Ç–µ–∫ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
5. **–í—ã–≤–æ–¥—ã** (1 –º–∏–Ω): –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ–∑–∏—Å—ã:

> "–ú—ã —Å–æ–∑–¥–∞–ª–∏ —Å–∏—Å—Ç–µ–º—É, –≥–¥–µ –∞–≥–µ–Ω—Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ç–µ–∫—Å—Ç, –∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–∏."

> "–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç —ç–ø–∏–∑–æ–¥–∏—á–µ—Å–∫—É—é –ø–∞–º—è—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –≤–ª–∏—è–µ—Ç –Ω–∞ –µ–≥–æ —Ä–µ—à–µ–Ω–∏—è."

> "–û—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π."

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

1. UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ (—Ñ–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏)
2. –î–∞—à–±–æ—Ä–¥ —Å –ª–µ–Ω—Ç–æ–π —Å–æ–±—ã—Ç–∏–π (WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
3. –ì—Ä–∞—Ñ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (D3.js)
4. –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä –∞–≥–µ–Ω—Ç–∞ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
5. –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–ª–∞–π–¥–µ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏, –∫–Ω–æ–ø–∫–∏ —Å–æ–±—ã—Ç–∏–π)

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç –±—ç–∫–µ–Ω–¥–∞ (ai-agent-service):

1. REST API –¥–ª—è CRUD –∞–≥–µ–Ω—Ç–æ–≤
2. REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–µ–π
3. WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è real-time —Å–æ–±—ã—Ç–∏–π
4. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å ML-—Å–µ—Ä–≤–∏—Å–æ–º
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ PostgreSQL

### –ß—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç ML (ml-service):

1. –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ –∞–≥–µ–Ω—Ç–∞
2. Memory Engine —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
3. Social Model
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM
5. API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

---

**–ì–æ—Ç–æ–≤–æ –∫ —Å—Ç–∞—Ä—Ç—É! üöÄ**
